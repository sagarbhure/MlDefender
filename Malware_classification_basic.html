<!DOCTYPE html>
<html>
<head>
	<title>Malware Classification Form</title>
</head>
<body>
	<h1>Malware Classification</h1>
	<form id="image-form" enctype="multipart/form-data">
		<label for="image-input">Choose an Malware image:</label>
		<input type="file" id="image-input" name="image">
		<button type="submit">Submit</button>
	</form>
	<div id="result"></div>
	<script>
		const form = document.getElementById("image-form");
		form.addEventListener("submit", function(event) {
			event.preventDefault();
			const input = document.getElementById("image-input");
			if (input.files.length == 0) {
				alert("Please select an image to classify.");
				return;
			}
			const file = input.files[0];
			const xhr = new XMLHttpRequest();
			xhr.open("POST", "https://hifg1d4yzj.execute-api.ap-south-1.amazonaws.com/dev/malware_classify");
			xhr.setRequestHeader("Content-Type", "application/octet-stream");
			xhr.responseType = "json";
			xhr.onload = function() {
				if (xhr.status === 200) {
					const label = xhr.response.predicted;
					document.getElementById("result").textContent = `The image is classified as: ${label}`;
				} else {
					alert("Failed to classify image.");
				}
			};
			xhr.send(file);
		});
	</script>
</body>
</html>
